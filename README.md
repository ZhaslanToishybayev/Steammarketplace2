# üî´ Steam Marketplace (CS2 & Dota 2)

![Project Status](https://img.shields.io/badge/Status-Production%20Ready-success)
![Version](https://img.shields.io/badge/Version-1.0.0-blue)
![License](https://img.shields.io/badge/License-MIT-green)

–°–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è P2P-–ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è —Ç–æ—Ä–≥–æ–≤–ª–∏ —Å–∫–∏–Ω–∞–º–∏ Steam —Å –∑–∞—â–∏—Ç–æ–π —Å–¥–µ–ª–æ–∫ (Escrow), –º–≥–Ω–æ–≤–µ–Ω–Ω—ã–º–∏ –≤—ã–ø–ª–∞—Ç–∞–º–∏ –∏ Telegram-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º–∏.

---

## üöÄ –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

*   **‚ö° Real-Time**: –ú–≥–Ω–æ–≤–µ–Ω–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ —Å–¥–µ–ª–∫–∞—Ö –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞ (WebSockets —á–µ—Ä–µ–∑ Nginx Proxy).
*   **üõ°Ô∏è Secure Escrow**: –°–∏—Å—Ç–µ–º–∞ —É–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Å—Ä–µ–¥—Å—Ç–≤–∞ –¥–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —Ç—Ä–µ–π–¥–∞ –≤ Steam.
*   **ü§ñ Smart Bots**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –±–æ—Ç—ã –¥–ª—è —Ç—Ä–µ–π–¥–æ–≤ —Å –∑–∞—â–∏—Ç–æ–π –æ—Ç —Å–±–æ–µ–≤ (Smart Rollback - –∞–≤—Ç–æ-–≤–æ–∑–≤—Ä–∞—Ç –¥–µ–Ω–µ–≥ –ø—Ä–∏ –æ—à–∏–±–∫–µ Steam).
*   **ü§ù P2P Trading**: –ü—Ä—è–º–∞—è —Ç–æ—Ä–≥–æ–≤–ª—è –º–µ–∂–¥—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ (–±–µ–∑ –ø–µ—Ä–µ–¥–∞—á–∏ —Å–∫–∏–Ω–∞ –±–æ—Ç—É).
*   **üì± Telegram Alerts**: –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –ø—Ä–æ–¥–∞–∂–∞—Ö –∏ —Å—Ç–∞—Ç—É—Å–µ —Å–∏—Å—Ç–µ–º—ã –≤ Telegram.
*   **üé® Modern UI**: –°—Ç–µ–∫–ª—è–Ω–Ω—ã–π –¥–∏–∑–∞–π–Ω (Glassmorphism), –∞–Ω–∏–º–∞—Ü–∏–∏, –∞–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å.

---

## üõ†Ô∏è –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

*   **Frontend**: Next.js 14 (App Router), Tailwind CSS, Framer Motion, Socket.io Client.
*   **Backend**: Node.js, Express, Passport.js (Steam Strategy), Socket.io (Redis Adapter).
*   **Database**: PostgreSQL 15 (Data), Redis 7 (Sessions & Queues).
*   **Infrastructure**: Docker Compose, Nginx (Gateway & SSL).
*   **Monitoring**: Prometheus & Grafana (Metrics), Telegram Bot (Critical Alerts), Audit Logs.

---

## üèÅ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç (Localhost)

### 1. –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
*   Docker & Docker Compose
*   Node.js 18+ (–¥–ª—è Playwright —Ç–µ—Å—Ç–æ–≤)

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è
–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞ (–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `.env.example` –∫–∞–∫ —à–∞–±–ª–æ–Ω):
```bash
cp .env.example .env
```
*–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —É–∫–∞–∂–∏—Ç–µ `STEAM_API_KEY`, `TELEGRAM_BOT_TOKEN` –∏ –¥–∞–Ω–Ω—ã–µ –±–æ—Ç–∞.*

### 3. –ó–∞–ø—É—Å–∫
```bash
docker compose up -d
```

–°–∞–π—Ç –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É: **http://localhost** (–ø–æ—Ä—Ç 80).

*   **–ê–¥–º–∏–Ω–∫–∞:** `http://localhost/admin` (–õ–æ–≥–∏–Ω: `admin` / `admin123`)
*   **–ì—Ä–∞—Ñ–∞–Ω–∞:** `http://localhost/grafana` (–õ–æ–≥–∏–Ω: `admin` / `admin`)
*   **API:** `http://localhost/api`

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (QA)

–ü—Ä–æ–µ–∫—Ç –ø–æ–∫—Ä—ã—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º–∏ E2E —Ç–µ—Å—Ç–∞–º–∏ (Playwright), –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É—é—â–∏–º–∏ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å.

```bash
# –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ –∏ –∞–¥–º–∏–Ω–∫–∏
cd apps/frontend
npx playwright test
```

–í–∫–ª—é—á–µ–Ω—ã —Å—Ü–µ–Ω–∞—Ä–∏–∏:
*   ‚úÖ **Trade Flow:** –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–∫—É–ø–∫–∏/–ø—Ä–æ–¥–∞–∂–∏.
*   ‚úÖ **Admin Panel:** –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Ö–æ–¥–∞ –∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏.
*   ‚úÖ **Mobile UX:** –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç–∏.

---

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```text
.
‚îú‚îÄ‚îÄ apps/
‚îÇ   ‚îú‚îÄ‚îÄ frontend/       # Next.js –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ + E2E Tests
‚îÇ   ‚îî‚îÄ‚îÄ backend/        # API –∏ –í–æ—Ä–∫–µ—Ä—ã
‚îú‚îÄ‚îÄ docker/             # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Docker
‚îú‚îÄ‚îÄ monitoring/         # Prometheus & Grafana –∫–æ–Ω—Ñ–∏–≥–∏
‚îú‚îÄ‚îÄ nginx/              # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —à–ª—é–∑–∞ (Dev & Prod)
‚îú‚îÄ‚îÄ scripts/            # –£—Ç–∏–ª–∏—Ç—ã
‚îî‚îÄ‚îÄ docker-compose.yml  # –û—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª –∑–∞–ø—É—Å–∫–∞
```

---

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –ê—É–¥–∏—Ç

*   **Smart Rollback**: –ï—Å–ª–∏ Steam –≤—ã–¥–∞–µ—Ç –æ—à–∏–±–∫—É –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ —Ç—Ä–µ–π–¥–∞, —Å–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –¥–µ–Ω—å–≥–∏ –∏ –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –ª–æ—Ç.
*   **Audit Logs**: –í—Å–µ —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –∏ –¥–µ–π—Å—Ç–≤–∏—è –∞–¥–º–∏–Ω–æ–≤ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è.
    *   *–°–∫–∞—á–∞—Ç—å –ª–æ–≥–∏*: `–ü–∞–Ω–µ–ª—å –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ -> Audit -> Export CSV`.
*   **Secure Admin**: –ü–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –∑–∞—â–∏—â–µ–Ω–∞ JWT —Ç–æ–∫–µ–Ω–∞–º–∏ –≤ httpOnly Cookies –∏ –∏–º–µ–µ—Ç –∑–∞—â–∏—Ç—É –æ—Ç –±—Ä—É—Ç—Ñ–æ—Ä—Å–∞.

---

## üåç –î–µ–ø–ª–æ–π –Ω–∞ VPS (Production)

1.  –ê—Ä–µ–Ω–¥—É–π—Ç–µ —Å–µ—Ä–≤–µ—Ä (Ubuntu 22.04+).
2.  –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ø—Ä–æ–µ–∫—Ç –Ω–∞ —Å–µ—Ä–≤–µ—Ä.
3.  –ù–∞—Å—Ç—Ä–æ–π—Ç–µ `.env`.
4.  **SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã (–ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫):**
    ```bash
    # –ó–∞–ø—É—Å—Ç–∏—Ç–µ –≤ HTTP —Ä–µ–∂–∏–º–µ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤
    docker compose up -d
    
    # –ü–æ–ª—É—á–∏—Ç–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç —á–µ—Ä–µ–∑ Certbot
    docker compose run --rm certbot certonly --webroot --webroot-path /var/www/certbot -d –≤–∞—à-–¥–æ–º–µ–Ω.com
    ```
5.  **–í–∫–ª—é—á–∏—Ç–µ HTTPS:**
    *   –†–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ SSL –±–ª–æ–∫ –≤ `nginx/production.conf`.
    *   –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ Nginx: `docker compose restart nginx`.

–ü–æ–¥—Ä–æ–±–Ω—ã–π –≥–∞–π–¥ –ø–æ –¥–µ–ø–ª–æ—é —Å–º–æ—Ç—Ä–∏—Ç–µ –≤ `OPS.md` (–µ—Å–ª–∏ —Å–æ–∑–¥–∞–Ω).

---

### –†–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–æ —Å ‚ù§Ô∏è –∏ ‚òï
OpenCode Agent (Senior Architect & Frontend Team)
