(()=>{var e={};e.id=427,e.ids=[427],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},6799:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>n.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>c,routeModule:()=>u,tree:()=>o});var r=a(7096),s=a(6132),l=a(7284),n=a.n(l),i=a(2564),d={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>i[e]);a.d(t,d);let o=["",{children:["admin",{children:["dashboard",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,323)),"/home/zhaslan/Downloads/Telegram Desktop/Steammarketplace2-main (2)/Steammarketplace2-main/apps/frontend/src/app/admin/dashboard/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,9862)),"/home/zhaslan/Downloads/Telegram Desktop/Steammarketplace2-main (2)/Steammarketplace2-main/apps/frontend/src/app/admin/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(a.bind(a,769)),"/home/zhaslan/Downloads/Telegram Desktop/Steammarketplace2-main (2)/Steammarketplace2-main/apps/frontend/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,9291,23)),"next/dist/client/components/not-found-error"]}],c=["/home/zhaslan/Downloads/Telegram Desktop/Steammarketplace2-main (2)/Steammarketplace2-main/apps/frontend/src/app/admin/dashboard/page.tsx"],m="/admin/dashboard/page",x={require:a,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/admin/dashboard/page",pathname:"/admin/dashboard",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},5360:(e,t,a)=>{Promise.resolve().then(a.bind(a,8850))},9329:(e,t,a)=>{Promise.resolve().then(a.bind(a,1084))},8850:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>i});var r=a(3854),s=a(4218),l=a(1018);let n=process.env.NEXT_PUBLIC_BACKEND_URL||"http://localhost:3001";function i(){let e=(0,l.useRouter)(),[t,a]=(0,s.useState)(null),[i,m]=(0,s.useState)(!0),[x,u]=(0,s.useState)(null),[h,p]=(0,s.useState)(null),[b,g]=(0,s.useState)(!0),f=(0,s.useCallback)(async()=>{try{let t=localStorage.getItem("adminToken");if(!t){e.push("/admin/login");return}let r=await fetch(`${n}/api/admin/analytics/dashboard`,{headers:{Authorization:`Bearer ${t}`}});if(401===r.status){localStorage.removeItem("adminToken"),e.push("/admin/login");return}let s=await r.json();s.success?(a(s.data),p(new Date),u(null)):u(s.error)}catch(e){u(e.message)}finally{m(!1)}},[e]);return((0,s.useEffect)(()=>{f()},[f]),(0,s.useEffect)(()=>{if(!b)return;let e=setInterval(f,5e3);return()=>clearInterval(e)},[b,f]),i)?r.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-purple-500"})}):x?r.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"bg-red-900/50 text-red-400 p-6 rounded-xl",children:[r.jsx("h2",{className:"text-xl font-bold mb-2",children:"Error"}),r.jsx("p",{children:x}),r.jsx("button",{onClick:f,className:"mt-4 px-4 py-2 bg-red-600 rounded-lg",children:"Retry"})]})}):t?r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-purple-900/20 to-gray-900 p-6",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,r.jsxs)("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-white",children:"\uD83D\uDCCA Admin Dashboard"}),(0,r.jsxs)("p",{className:"text-gray-400 text-sm mt-1",children:["Last updated: ",h?.toLocaleTimeString()]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsxs)("label",{className:"flex items-center gap-2 text-gray-400 text-sm",children:[r.jsx("input",{type:"checkbox",checked:b,onChange:e=>g(e.target.checked),className:"rounded"}),"Auto-refresh"]}),r.jsx("button",{onClick:f,className:"px-4 py-2 bg-purple-600 hover:bg-purple-700 rounded-lg text-white text-sm transition",children:"\uD83D\uDD04 Refresh"})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:[r.jsx(d,{title:"Trades (24h)",value:t.trades.last_24h,subtitle:`${t.trades.completed} completed`,icon:"\uD83D\uDCE6",color:"blue"}),r.jsx(d,{title:"Revenue (24h)",value:`$${parseFloat(String(t.revenue.fees_24h)||"0").toFixed(2)}`,subtitle:`$${parseFloat(String(t.revenue.volume_24h)||"0").toFixed(2)} volume`,icon:"\uD83D\uDCB0",color:"green"}),r.jsx(d,{title:"Active Listings",value:t.listings.active,subtitle:`${t.listings.reserved} reserved`,icon:"\uD83C\uDFF7️",color:"yellow"}),r.jsx(d,{title:"Users",value:t.users.total,subtitle:`+${t.users.new_24h} today`,icon:"\uD83D\uDC65",color:"purple"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,r.jsxs)("div",{className:"bg-gray-800/50 backdrop-blur-xl rounded-2xl p-6 border border-gray-700",children:[r.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"\uD83E\uDD16 Bot Status"}),(0,r.jsxs)("div",{className:"flex items-center gap-4 mb-4",children:[r.jsx("div",{className:`w-4 h-4 rounded-full ${t.bots.online>0?"bg-green-500 animate-pulse":"bg-red-500"}`}),(0,r.jsxs)("span",{className:"text-white font-medium",children:[t.bots.online,"/",t.bots.total," Online"]})]}),r.jsx("div",{className:"space-y-3",children:t.bots.bots.map((e,t)=>(0,r.jsxs)("div",{className:`flex items-center justify-between p-3 rounded-lg ${e.isOnline?"bg-green-900/20":"bg-red-900/20"}`,children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:`w-2 h-2 rounded-full ${e.isOnline?"bg-green-500":"bg-red-500"}`}),r.jsx("span",{className:"text-white text-sm",children:e.name})]}),(0,r.jsxs)("span",{className:"text-gray-400 text-xs",children:[e.activeTrades," trades"]})]},t))})]}),(0,r.jsxs)("div",{className:"bg-gray-800/50 backdrop-blur-xl rounded-2xl p-6 border border-gray-700",children:[r.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"\uD83D\uDCC8 Trade Stats"}),(0,r.jsxs)("div",{className:"space-y-4",children:[r.jsx(o,{label:"Total Trades",value:t.trades.total}),r.jsx(o,{label:"Completed",value:t.trades.completed,color:"green"}),r.jsx(o,{label:"Awaiting Buyer",value:t.trades.awaiting_buyer,color:"yellow"}),r.jsx(o,{label:"Awaiting Seller",value:t.trades.awaiting_seller,color:"blue"}),r.jsx(o,{label:"Cancelled/Refunded",value:t.trades.cancelled,color:"gray"}),r.jsx(o,{label:"Errors",value:t.trades.errors,color:"red"})]})]}),(0,r.jsxs)("div",{className:"bg-gray-800/50 backdrop-blur-xl rounded-2xl p-6 border border-gray-700",children:[r.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"\uD83D\uDCB5 Revenue"}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"text-center py-4",children:[(0,r.jsxs)("p",{className:"text-4xl font-bold text-green-400",children:["$",parseFloat(String(t.revenue.total_fees)||"0").toFixed(2)]}),r.jsx("p",{className:"text-gray-400 text-sm",children:"Total Platform Fees"})]}),r.jsx("hr",{className:"border-gray-700"}),r.jsx(o,{label:"Volume (Total)",value:`$${parseFloat(String(t.revenue.total_volume)||"0").toFixed(2)}`}),r.jsx(o,{label:"Volume (7d)",value:`$${parseFloat(String(t.revenue.fees_7d)||"0").toFixed(2)}`}),r.jsx(o,{label:"Avg Price",value:`$${parseFloat(String(t.listings.avg_price)||"0").toFixed(2)}`})]})]})]}),(0,r.jsxs)("div",{className:"mt-8 bg-gray-800/50 backdrop-blur-xl rounded-2xl p-6 border border-gray-700",children:[r.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"\uD83D\uDCCB Recent Activity"}),r.jsx("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"w-full text-sm",children:[r.jsx("thead",{children:(0,r.jsxs)("tr",{className:"text-left text-gray-400 border-b border-gray-700",children:[r.jsx("th",{className:"pb-3",children:"Status"}),r.jsx("th",{className:"pb-3",children:"Item"}),r.jsx("th",{className:"pb-3",children:"Price"}),r.jsx("th",{className:"pb-3",children:"Type"}),r.jsx("th",{className:"pb-3",children:"Buyer"}),r.jsx("th",{className:"pb-3",children:"Seller"}),r.jsx("th",{className:"pb-3",children:"Time"})]})}),r.jsx("tbody",{children:t.recentActivity.map(e=>(0,r.jsxs)("tr",{className:"border-b border-gray-700/50 hover:bg-gray-700/30",children:[r.jsx("td",{className:"py-3",children:r.jsx(c,{status:e.status})}),r.jsx("td",{className:"py-3 text-white max-w-[200px] truncate",children:e.item_name}),(0,r.jsxs)("td",{className:"py-3 text-green-400",children:["$",e.price]}),r.jsx("td",{className:"py-3",children:r.jsx("span",{className:`px-2 py-1 rounded text-xs ${"p2p"===e.trade_type?"bg-purple-500/20 text-purple-400":"bg-blue-500/20 text-blue-400"}`,children:e.trade_type})}),r.jsx("td",{className:"py-3 text-gray-400",children:e.buyer_name||"—"}),r.jsx("td",{className:"py-3 text-gray-400",children:e.seller_name||"—"}),r.jsx("td",{className:"py-3 text-gray-500 text-xs",children:new Date(e.updated_at).toLocaleString()})]},e.id))})]})})]})]})}):null}function d({title:e,value:t,subtitle:a,icon:s,color:l}){return r.jsx("div",{className:`bg-gradient-to-br ${{blue:"from-blue-600 to-blue-800",green:"from-green-600 to-green-800",yellow:"from-yellow-600 to-yellow-800",purple:"from-purple-600 to-purple-800"}[l]} rounded-2xl p-5 shadow-lg`,children:(0,r.jsxs)("div",{className:"flex justify-between items-start",children:[(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-white/80 text-sm",children:e}),r.jsx("p",{className:"text-3xl font-bold text-white mt-1",children:t}),r.jsx("p",{className:"text-white/60 text-xs mt-1",children:a})]}),r.jsx("span",{className:"text-3xl",children:s})]})})}function o({label:e,value:t,color:a="white"}){return(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-gray-400",children:e}),r.jsx("span",{className:`font-medium ${{green:"text-green-400",yellow:"text-yellow-400",blue:"text-blue-400",red:"text-red-400",gray:"text-gray-400",white:"text-white"}[a]}`,children:t})]})}function c({status:e}){let t={completed:{bg:"bg-green-500/20",text:"text-green-400",label:"✅ Completed"},awaiting_buyer:{bg:"bg-yellow-500/20",text:"text-yellow-400",label:"⏳ Awaiting Buyer"},awaiting_seller:{bg:"bg-blue-500/20",text:"text-blue-400",label:"⏳ Awaiting Seller"},cancelled:{bg:"bg-gray-500/20",text:"text-gray-400",label:"❌ Cancelled"},refunded:{bg:"bg-orange-500/20",text:"text-orange-400",label:"\uD83D\uDCB0 Refunded"},error_sending:{bg:"bg-red-500/20",text:"text-red-400",label:"\uD83D\uDEA8 Error"},error_forwarding:{bg:"bg-red-500/20",text:"text-red-400",label:"\uD83D\uDEA8 Error"}}[e]||{bg:"bg-gray-500/20",text:"text-gray-400",label:e};return r.jsx("span",{className:`px-2 py-1 rounded text-xs ${t.bg} ${t.text}`,children:t.label})}},1084:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>c});var r=a(3854),s=a(7782),l=a(4218),n=a(1018),i=a(5548),d=a.n(i);function o({children:e}){let{admin:t,isLoading:a,logout:i}=(0,s.J3)(),o=(0,n.useRouter)(),c=(0,n.usePathname)(),[m,x]=(0,l.useState)(!0);return((0,l.useEffect)(()=>{a||t||"/admin/login"===c||o.push("/admin/login")},[t,a,c,o]),"/admin/login"===c)?r.jsx(r.Fragment,{children:e}):a?r.jsx("div",{className:"min-h-screen bg-[var(--bg-primary)] flex items-center justify-center",children:r.jsx("div",{className:"animate-spin w-8 h-8 border-2 border-[var(--accent-blue)] border-t-transparent rounded-full"})}):t?(0,r.jsxs)("div",{className:"min-h-screen bg-[var(--bg-primary)] flex",children:[(0,r.jsxs)("aside",{className:`${m?"w-64":"w-16"} bg-[var(--bg-secondary)] border-r border-[var(--border-default)] transition-all duration-300 flex flex-col`,children:[(0,r.jsxs)("div",{className:"p-4 border-b border-[var(--border-default)] flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-[var(--accent-red)] to-[var(--accent-orange)] rounded-lg flex items-center justify-center shrink-0",children:r.jsx("span",{className:"text-white font-bold",children:"A"})}),m&&r.jsx("span",{className:"font-bold text-white",children:"Admin Panel"})]}),r.jsx("nav",{className:"flex-1 p-3",children:[{href:"/admin",label:"Dashboard",icon:"\uD83D\uDCCA"},{href:"/admin/users",label:"Users",icon:"\uD83D\uDC65"},{href:"/admin/listings",label:"Listings",icon:"\uD83D\uDCE6"},{href:"/admin/trades",label:"Trades",icon:"\uD83D\uDD04"},{href:"/admin/bots",label:"Bots",icon:"\uD83E\uDD16"},{href:"/admin/logs",label:"Audit Logs",icon:"\uD83D\uDCCB"}].map(e=>{let t=c===e.href||"/admin"!==e.href&&c.startsWith(e.href);return(0,r.jsxs)(d(),{href:e.href,className:`flex items-center gap-3 px-3 py-2.5 rounded-lg mb-1 transition-colors ${t?"bg-[var(--accent-blue)] text-white":"text-[var(--text-secondary)] hover:bg-[var(--bg-tertiary)] hover:text-white"}`,children:[r.jsx("span",{className:"text-lg",children:e.icon}),m&&r.jsx("span",{children:e.label})]},e.href)})}),r.jsx("div",{className:"p-4 border-t border-[var(--border-default)]",children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-8 h-8 bg-[var(--accent-blue)] rounded-full flex items-center justify-center text-white font-bold text-sm",children:t.username[0].toUpperCase()}),m&&(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[r.jsx("div",{className:"text-sm font-medium text-white truncate",children:t.username}),r.jsx("div",{className:"text-xs text-[var(--text-muted)]",children:t.role})]}),r.jsx("button",{onClick:i,className:"text-[var(--text-muted)] hover:text-[var(--accent-red)] transition-colors",title:"Logout",children:r.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})})})]})}),r.jsx("button",{onClick:()=>x(!m),className:"absolute top-20 -right-3 w-6 h-6 bg-[var(--bg-tertiary)] border border-[var(--border-default)] rounded-full flex items-center justify-center text-[var(--text-muted)] hover:text-white",children:m?"←":"→"})]}),r.jsx("main",{className:"flex-1 p-8 overflow-auto",children:e})]}):null}function c({children:e}){return r.jsx(s.W,{children:r.jsx(o,{children:e})})}},7782:(e,t,a)=>{"use strict";a.d(t,{J3:()=>n,U:()=>d,W:()=>i});var r=a(3854),s=a(4218);let l=(0,s.createContext)(null);function n(){let e=(0,s.useContext)(l);if(!e)throw Error("useAdminAuth must be used within AdminAuthProvider");return e}function i({children:e}){let[t,a]=(0,s.useState)(null),[n,i]=(0,s.useState)(null),[d,o]=(0,s.useState)(!0);(0,s.useEffect)(()=>{let e=localStorage.getItem("admin_token");e?c(e):o(!1)},[]);let c=async e=>{try{let t=await fetch("http://localhost:3001/api/admin/verify",{headers:{Authorization:`Bearer ${e}`}}),r=await t.json();r.success?(a(r.admin),i(e)):localStorage.removeItem("admin_token")}catch(e){localStorage.removeItem("admin_token")}finally{o(!1)}},m=async(e,t)=>{try{let r=await fetch("http://localhost:3001/api/admin/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:t})}),s=await r.json();if(s.success)return a(s.data.admin),i(s.data.token),localStorage.setItem("admin_token",s.data.token),!0;return!1}catch(e){return!1}};return r.jsx(l.Provider,{value:{admin:t,token:n,isLoading:d,login:m,logout:()=>{a(null),i(null),localStorage.removeItem("admin_token")}},children:e})}function d(){let{token:e}=n(),t=async(t,a={})=>{let r=await fetch(`http://localhost:3001/api/admin${t}`,{...a,headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`,...a.headers}});return r.json()};return{apiCall:t}}},323:(e,t,a)=>{"use strict";a.r(t),a.d(t,{$$typeof:()=>n,__esModule:()=>l,default:()=>d});var r=a(5153);let s=(0,r.createProxy)(String.raw`/home/zhaslan/Downloads/Telegram Desktop/Steammarketplace2-main (2)/Steammarketplace2-main/apps/frontend/src/app/admin/dashboard/page.tsx`),{__esModule:l,$$typeof:n}=s,i=s.default,d=i},9862:(e,t,a)=>{"use strict";a.r(t),a.d(t,{$$typeof:()=>n,__esModule:()=>l,default:()=>d});var r=a(5153);let s=(0,r.createProxy)(String.raw`/home/zhaslan/Downloads/Telegram Desktop/Steammarketplace2-main (2)/Steammarketplace2-main/apps/frontend/src/app/admin/layout.tsx`),{__esModule:l,$$typeof:n}=s,i=s.default,d=i}};var t=require("../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[581,646,919],()=>a(6799));module.exports=r})();