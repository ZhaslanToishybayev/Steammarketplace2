(()=>{var e={};e.id=674,e.ids=[674],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4688:(e,a,t)=>{"use strict";t.r(a),t.d(a,{GlobalError:()=>l.a,__next_app__:()=>u,originalPathname:()=>m,pages:()=>c,routeModule:()=>h,tree:()=>d});var s=t(7096),r=t(6132),n=t(7284),l=t.n(n),i=t(2564),o={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);t.d(a,o);let d=["",{children:["admin",{children:["users",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,7257)),"/home/zhaslan/Downloads/Telegram Desktop/Steammarketplace2-main (2)/Steammarketplace2-main/apps/frontend/src/app/admin/users/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,9862)),"/home/zhaslan/Downloads/Telegram Desktop/Steammarketplace2-main (2)/Steammarketplace2-main/apps/frontend/src/app/admin/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,769)),"/home/zhaslan/Downloads/Telegram Desktop/Steammarketplace2-main (2)/Steammarketplace2-main/apps/frontend/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,9291,23)),"next/dist/client/components/not-found-error"]}],c=["/home/zhaslan/Downloads/Telegram Desktop/Steammarketplace2-main (2)/Steammarketplace2-main/apps/frontend/src/app/admin/users/page.tsx"],m="/admin/users/page",u={require:t,loadChunk:()=>Promise.resolve()},h=new s.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/admin/users/page",pathname:"/admin/users",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},9329:(e,a,t)=>{Promise.resolve().then(t.bind(t,1084))},4360:(e,a,t)=>{Promise.resolve().then(t.bind(t,5448))},1084:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>c});var s=t(3854),r=t(7782),n=t(4218),l=t(1018),i=t(5548),o=t.n(i);function d({children:e}){let{admin:a,isLoading:t,logout:i}=(0,r.J3)(),d=(0,l.useRouter)(),c=(0,l.usePathname)(),[m,u]=(0,n.useState)(!0);return((0,n.useEffect)(()=>{t||a||"/admin/login"===c||d.push("/admin/login")},[a,t,c,d]),"/admin/login"===c)?s.jsx(s.Fragment,{children:e}):t?s.jsx("div",{className:"min-h-screen bg-[var(--bg-primary)] flex items-center justify-center",children:s.jsx("div",{className:"animate-spin w-8 h-8 border-2 border-[var(--accent-blue)] border-t-transparent rounded-full"})}):a?(0,s.jsxs)("div",{className:"min-h-screen bg-[var(--bg-primary)] flex",children:[(0,s.jsxs)("aside",{className:`${m?"w-64":"w-16"} bg-[var(--bg-secondary)] border-r border-[var(--border-default)] transition-all duration-300 flex flex-col`,children:[(0,s.jsxs)("div",{className:"p-4 border-b border-[var(--border-default)] flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-[var(--accent-red)] to-[var(--accent-orange)] rounded-lg flex items-center justify-center shrink-0",children:s.jsx("span",{className:"text-white font-bold",children:"A"})}),m&&s.jsx("span",{className:"font-bold text-white",children:"Admin Panel"})]}),s.jsx("nav",{className:"flex-1 p-3",children:[{href:"/admin",label:"Dashboard",icon:"\uD83D\uDCCA"},{href:"/admin/users",label:"Users",icon:"\uD83D\uDC65"},{href:"/admin/listings",label:"Listings",icon:"\uD83D\uDCE6"},{href:"/admin/trades",label:"Trades",icon:"\uD83D\uDD04"},{href:"/admin/bots",label:"Bots",icon:"\uD83E\uDD16"},{href:"/admin/logs",label:"Audit Logs",icon:"\uD83D\uDCCB"}].map(e=>{let a=c===e.href||"/admin"!==e.href&&c.startsWith(e.href);return(0,s.jsxs)(o(),{href:e.href,className:`flex items-center gap-3 px-3 py-2.5 rounded-lg mb-1 transition-colors ${a?"bg-[var(--accent-blue)] text-white":"text-[var(--text-secondary)] hover:bg-[var(--bg-tertiary)] hover:text-white"}`,children:[s.jsx("span",{className:"text-lg",children:e.icon}),m&&s.jsx("span",{children:e.label})]},e.href)})}),s.jsx("div",{className:"p-4 border-t border-[var(--border-default)]",children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-8 h-8 bg-[var(--accent-blue)] rounded-full flex items-center justify-center text-white font-bold text-sm",children:a.username[0].toUpperCase()}),m&&(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"text-sm font-medium text-white truncate",children:a.username}),s.jsx("div",{className:"text-xs text-[var(--text-muted)]",children:a.role})]}),s.jsx("button",{onClick:i,className:"text-[var(--text-muted)] hover:text-[var(--accent-red)] transition-colors",title:"Logout",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})})})]})}),s.jsx("button",{onClick:()=>u(!m),className:"absolute top-20 -right-3 w-6 h-6 bg-[var(--bg-tertiary)] border border-[var(--border-default)] rounded-full flex items-center justify-center text-[var(--text-muted)] hover:text-white",children:m?"←":"→"})]}),s.jsx("main",{className:"flex-1 p-8 overflow-auto",children:e})]}):null}function c({children:e}){return s.jsx(r.W,{children:s.jsx(d,{children:e})})}},5448:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>i});var s=t(3854),r=t(4218),n=t(7782),l=t(1158);function i(){let{apiCall:e}=(0,n.U)(),[a,t]=(0,r.useState)([]),[i,o]=(0,r.useState)(null),[d,c]=(0,r.useState)(!0),[m,u]=(0,r.useState)(""),[h,x]=(0,r.useState)(1),[p,f]=(0,r.useState)(null),[v,b]=(0,r.useState)(""),[g,j]=(0,r.useState)(!1),[y,N]=(0,r.useState)(null);(0,r.useEffect)(()=>{w()},[h,m]);let w=async()=>{c(!0);try{let a=new URLSearchParams({page:h.toString(),limit:"20"});m&&a.append("search",m);let s=await e(`/users?${a}`);s.success&&(t(s.data.users),o(s.data.pagination))}catch(e){console.error("Failed to load users:",e)}finally{c(!1)}},S=async()=>{if(p&&v){j(!0);try{let s=await e(`/users/${p.id}`,{method:"PATCH",body:JSON.stringify({balance_set:parseFloat(v)})});s.success&&(t(a.map(e=>e.id===p.id?s.data:e)),f(null))}catch(e){console.error("Failed to update balance:",e)}finally{j(!1)}}},k=async()=>{if(y){j(!0);try{let s=await e(`/users/${y.id}`,{method:"PATCH",body:JSON.stringify({is_banned:!y.is_banned})});s.success&&(t(a.map(e=>e.id===y.id?s.data:e)),N(null))}catch(e){console.error("Failed to toggle ban:",e)}finally{j(!1)}}};return(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,s.jsxs)("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-white",children:"Users"}),s.jsx("p",{className:"text-[var(--text-secondary)] mt-1",children:i?`${i.total} total users`:"Loading..."})]}),s.jsx("div",{className:"w-64",children:s.jsx(l.Mj,{placeholder:"Search users...",value:m,onChange:e=>{u(e.target.value),x(1)},onClear:()=>u("")})})]}),(0,s.jsxs)(l.Zb,{children:[s.jsx(l.aY,{className:"p-0",children:(0,s.jsxs)("table",{className:"table",children:[s.jsx("thead",{children:(0,s.jsxs)("tr",{children:[s.jsx("th",{children:"User"}),s.jsx("th",{children:"Steam ID"}),s.jsx("th",{children:"Balance"}),s.jsx("th",{children:"Status"}),s.jsx("th",{children:"Joined"}),s.jsx("th",{children:"Actions"})]})}),s.jsx("tbody",{children:d?Array.from({length:5}).map((e,a)=>s.jsx(l.tv,{columns:6},a)):0===a.length?s.jsx("tr",{children:s.jsx("td",{colSpan:6,className:"text-center py-8 text-[var(--text-muted)]",children:"No users found"})}):a.map(e=>(0,s.jsxs)("tr",{children:[s.jsx("td",{children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[s.jsx("img",{src:e.avatar||"/default-avatar.png",alt:"",className:"w-8 h-8 rounded-full"}),s.jsx("span",{className:"font-medium",children:e.username})]})}),s.jsx("td",{className:"font-mono text-sm text-[var(--text-muted)]",children:e.steam_id}),s.jsx("td",{children:(0,s.jsxs)("span",{className:"text-[var(--accent-green)] font-mono",children:["$",parseFloat(e.balance).toFixed(2)]})}),s.jsx("td",{children:s.jsx(l.Ct,{variant:e.is_banned?"red":"green",children:e.is_banned?"Banned":"Active"})}),s.jsx("td",{className:"text-[var(--text-muted)]",children:new Date(e.created_at).toLocaleDateString()}),s.jsx("td",{children:(0,s.jsxs)("div",{className:"flex gap-2",children:[s.jsx(l.zx,{size:"sm",variant:"secondary",onClick:()=>{f(e),b(e.balance)},children:"Edit $"}),s.jsx(l.zx,{size:"sm",variant:e.is_banned?"success":"danger",onClick:()=>N(e),children:e.is_banned?"Unban":"Ban"})]})})]},e.id))})]})}),i&&i.pages>1&&(0,s.jsxs)("div",{className:"p-4 border-t border-[var(--border-default)] flex justify-center gap-2",children:[s.jsx(l.zx,{size:"sm",variant:"secondary",disabled:1===h,onClick:()=>x(h-1),children:"← Prev"}),(0,s.jsxs)("span",{className:"px-4 py-2 text-[var(--text-secondary)]",children:["Page ",h," of ",i.pages]}),s.jsx(l.zx,{size:"sm",variant:"secondary",disabled:h===i.pages,onClick:()=>x(h+1),children:"Next →"})]})]}),p&&s.jsx("div",{className:"modal-overlay",onClick:()=>f(null),children:(0,s.jsxs)("div",{className:"modal-content w-96",onClick:e=>e.stopPropagation(),children:[s.jsx("div",{className:"p-4 border-b border-[var(--border-default)]",children:s.jsx("h2",{className:"font-semibold text-white",children:"Edit Balance"})}),(0,s.jsxs)("div",{className:"p-4",children:[(0,s.jsxs)("p",{className:"text-[var(--text-secondary)] mb-4",children:["User: ",p.username]}),s.jsx(l.II,{label:"New Balance",type:"number",step:"0.01",value:v,onChange:e=>b(e.target.value)}),(0,s.jsxs)("div",{className:"flex gap-2 mt-4",children:[s.jsx(l.zx,{variant:"secondary",onClick:()=>f(null),children:"Cancel"}),s.jsx(l.zx,{variant:"primary",onClick:S,loading:g,children:"Save"})]})]})]})}),s.jsx(l.sm,{isOpen:!!y,onClose:()=>N(null),onConfirm:k,title:y?.is_banned?"Unban User":"Ban User",message:y?`Are you sure you want to ${y.is_banned?"unban":"ban"} ${y.username}?`:"",confirmText:y?.is_banned?"Unban":"Ban",variant:y?.is_banned?"default":"danger",loading:g})]})}},7782:(e,a,t)=>{"use strict";t.d(a,{J3:()=>l,U:()=>o,W:()=>i});var s=t(3854),r=t(4218);let n=(0,r.createContext)(null);function l(){let e=(0,r.useContext)(n);if(!e)throw Error("useAdminAuth must be used within AdminAuthProvider");return e}function i({children:e}){let[a,t]=(0,r.useState)(null),[l,i]=(0,r.useState)(null),[o,d]=(0,r.useState)(!0);(0,r.useEffect)(()=>{let e=localStorage.getItem("admin_token");e?c(e):d(!1)},[]);let c=async e=>{try{let a=await fetch("http://localhost:3001/api/admin/verify",{headers:{Authorization:`Bearer ${e}`}}),s=await a.json();s.success?(t(s.admin),i(e)):localStorage.removeItem("admin_token")}catch(e){localStorage.removeItem("admin_token")}finally{d(!1)}},m=async(e,a)=>{try{let s=await fetch("http://localhost:3001/api/admin/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:a})}),r=await s.json();if(r.success)return t(r.data.admin),i(r.data.token),localStorage.setItem("admin_token",r.data.token),!0;return!1}catch(e){return!1}};return s.jsx(n.Provider,{value:{admin:a,token:l,isLoading:o,login:m,logout:()=>{t(null),i(null),localStorage.removeItem("admin_token")}},children:e})}function o(){let{token:e}=l(),a=async(a,t={})=>{let s=await fetch(`http://localhost:3001/api/admin${a}`,{...t,headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`,...t.headers}});return s.json()};return{apiCall:a}}},9862:(e,a,t)=>{"use strict";t.r(a),t.d(a,{$$typeof:()=>l,__esModule:()=>n,default:()=>o});var s=t(5153);let r=(0,s.createProxy)(String.raw`/home/zhaslan/Downloads/Telegram Desktop/Steammarketplace2-main (2)/Steammarketplace2-main/apps/frontend/src/app/admin/layout.tsx`),{__esModule:n,$$typeof:l}=r,i=r.default,o=i},7257:(e,a,t)=>{"use strict";t.r(a),t.d(a,{$$typeof:()=>l,__esModule:()=>n,default:()=>o});var s=t(5153);let r=(0,s.createProxy)(String.raw`/home/zhaslan/Downloads/Telegram Desktop/Steammarketplace2-main (2)/Steammarketplace2-main/apps/frontend/src/app/admin/users/page.tsx`),{__esModule:n,$$typeof:l}=r,i=r.default,o=i}};var a=require("../../../webpack-runtime.js");a.C(e);var t=e=>a(a.s=e),s=a.X(0,[581,646,64,919,158],()=>t(4688));module.exports=s})();