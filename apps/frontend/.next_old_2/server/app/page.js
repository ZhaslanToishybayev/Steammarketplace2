(()=>{var e={};e.id=931,e.ids=[931],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},7921:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>l.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>d,routeModule:()=>x,tree:()=>c});var a=r(7096),s=r(6132),n=r(7284),l=r.n(n),o=r(2564),i={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>o[e]);r.d(t,i);let c=["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,8203)),"/home/zhaslan/Downloads/Telegram Desktop/Steammarketplace2-main (2)/Steammarketplace2-main/apps/frontend/src/app/page.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,769)),"/home/zhaslan/Downloads/Telegram Desktop/Steammarketplace2-main (2)/Steammarketplace2-main/apps/frontend/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,9291,23)),"next/dist/client/components/not-found-error"]}],d=["/home/zhaslan/Downloads/Telegram Desktop/Steammarketplace2-main (2)/Steammarketplace2-main/apps/frontend/src/app/page.tsx"],u="/page",m={require:r,loadChunk:()=>Promise.resolve()},x=new a.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},1335:(e,t,r)=>{Promise.resolve().then(r.bind(r,4726))},4726:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>h});var a=r(3854),s=r(5548),n=r.n(s),l=r(4218),o=r(943),i=r(2828),c=r(1158),d=r(2693);function u({isOpen:e,onClose:t,onCheckout:r}){let{items:s,itemCount:n,totalPrice:o,removeFromCart:i,clearCart:u,isLoading:m}=(0,d.j)(),[x,h]=(0,l.useState)(!1),p=async()=>{h(!0),await r(),h(!1)};return a.jsx(c.yo,{open:e,onOpenChange:e=>!e&&t(),children:(0,a.jsxs)(c.ue,{className:"flex flex-col h-full w-full sm:max-w-md bg-[var(--bg-secondary)] border-l border-[var(--border-default)]",children:[a.jsx(c.Tu,{className:"border-b border-[var(--border-default)] pb-4",children:a.jsx("div",{className:"flex items-center justify-between",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx(c.bC,{className:"text-lg font-semibold text-white",children:"Shopping Cart"}),a.jsx(c.Ct,{variant:"blue",children:n})]})})}),a.jsx("div",{className:"flex-1 overflow-y-auto -mx-6 px-6 py-4",children:m?a.jsx("div",{className:"text-center py-8 text-[var(--text-muted)]",children:"Loading..."}):0===s.length?(0,a.jsxs)("div",{className:"text-center py-12",children:[a.jsx("div",{className:"text-4xl mb-4",children:"\uD83D\uDED2"}),a.jsx("p",{className:"text-[var(--text-muted)]",children:"Your cart is empty"})]}):a.jsx("div",{className:"space-y-3",children:s.map(e=>(0,a.jsxs)("div",{className:"bg-[var(--bg-tertiary)] rounded-lg p-3 flex gap-3 group relative border border-transparent hover:border-[var(--border-default)] transition-colors",children:[a.jsx("img",{src:e.image,alt:e.name,className:"w-16 h-16 object-contain bg-[var(--bg-primary)] rounded"}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[a.jsx("h3",{className:"text-sm font-medium text-white truncate",children:e.name}),void 0!==e.float&&a.jsx("div",{className:"mt-1",children:a.jsx(c.Hd,{value:e.float,size:"sm",showValue:!1})}),(0,a.jsxs)("div",{className:"mt-1 text-[var(--accent-green)] font-bold",children:["$",e.price.toFixed(2)]})]}),a.jsx("button",{onClick:()=>i(e.listingId),className:"absolute top-2 right-2 text-[var(--text-muted)] hover:text-[var(--accent-red)] opacity-0 group-hover:opacity-100 transition-opacity","aria-label":"Remove item",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},e.listingId))})}),s.length>0&&a.jsx(c.FF,{className:"mt-auto border-t border-[var(--border-default)] pt-4 sm:justify-between sm:space-x-0",children:(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsxs)("span",{className:"text-[var(--text-secondary)]",children:["Total (",n," items)"]}),(0,a.jsxs)("span",{className:"text-2xl font-bold text-[var(--accent-green)]",children:["$",o.toFixed(2)]})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[a.jsx(c.zx,{variant:"secondary",className:"flex-1",onClick:()=>u(),children:"Clear"}),a.jsx(c.zx,{variant:"success",className:"flex-1 glow-green",onClick:p,disabled:x,children:x?"Processing...":"Checkout"})]})]})})]})})}function m({onClick:e}){let{itemCount:t,totalPrice:r}=(0,d.j)();return(0,a.jsxs)("button",{onClick:e,className:"relative flex items-center gap-2 bg-[var(--bg-tertiary)] hover:bg-[var(--bg-hover)] px-4 py-2 rounded-lg transition-colors",children:[a.jsx("svg",{className:"w-5 h-5 text-[var(--text-secondary)]",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"})}),t>0&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("span",{className:"text-[var(--accent-green)] font-bold",children:["$",r.toFixed(2)]}),a.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-[var(--accent-blue)] text-white text-xs font-bold rounded-full flex items-center justify-center",children:t})]})]})}function x({steamId:e}){let[t,r]=(0,l.useState)(!1),{notifications:s,unreadCount:n,isConnected:o,markAsRead:i,markAllAsRead:c,clearNotifications:d}=function(e){let[t,r]=(0,l.useState)([]),[a,s]=(0,l.useState)(0),n=(0,l.useCallback)(e=>{r(t=>[{...e,id:Date.now(),read:!1},...t].slice(0,50)),s(e=>e+1)},[]),{isConnected:o}=function(e){let{steamId:t,onTradeUpdate:r,onPriceAlert:a,onNewListing:s,onSystemNotification:n,reconnectAttempts:o=5,reconnectInterval:i=3e3}=e,[c,d]=(0,l.useState)(!1),[u,m]=(0,l.useState)(null),x=(0,l.useRef)(null),h=(0,l.useRef)(0),p=(0,l.useRef)(),g=(0,l.useCallback)(()=>{if(!t)return;let e=`${process.env.NEXT_PUBLIC_WS_URL||"ws://localhost:3001"}/ws?steamId=${t}`;try{x.current=new WebSocket(e),x.current.onopen=()=>{console.log("WebSocket connected"),d(!0),h.current=0},x.current.onmessage=e=>{try{let t=JSON.parse(e.data);switch(m(t),t.type){case"trade_update":r?.(t.data);break;case"price_alert":a?.(t.data);break;case"new_listing":s?.(t.data);break;case"system":n?.(t.data)}}catch(e){console.error("Failed to parse WebSocket message:",e)}},x.current.onclose=()=>{console.log("WebSocket disconnected"),d(!1),h.current<o&&(h.current++,console.log(`Reconnecting... (attempt ${h.current})`),p.current=setTimeout(g,i))},x.current.onerror=e=>{console.error("WebSocket error:",e)}}catch(e){console.error("Failed to create WebSocket:",e)}},[t,r,a,s,n,o,i]),f=(0,l.useCallback)(e=>{x.current?.readyState===WebSocket.OPEN&&x.current.send(JSON.stringify(e))},[]),b=(0,l.useCallback)(()=>{x.current&&x.current.close(),h.current=0,g()},[g]);return(0,l.useEffect)(()=>(g(),()=>{p.current&&clearTimeout(p.current),x.current&&x.current.close()}),[g]),(0,l.useEffect)(()=>{if(!c)return;let e=setInterval(()=>{f({type:"ping"})},25e3);return()=>clearInterval(e)},[c,f]),{isConnected:c,lastMessage:u,send:f,reconnect:b}}({steamId:e,onTradeUpdate:n,onPriceAlert:n,onSystemNotification:n}),i=(0,l.useCallback)(e=>{r(t=>t.map(t=>t.id===e?{...t,read:!0}:t)),s(e=>Math.max(0,e-1))},[]),c=(0,l.useCallback)(()=>{r(e=>e.map(e=>({...e,read:!0}))),s(0)},[]),d=(0,l.useCallback)(()=>{r([]),s(0)},[]);return{notifications:t,unreadCount:a,isConnected:o,markAsRead:i,markAllAsRead:c,clearNotifications:d}}(e),u=e=>{switch(e){case"trade_update":return"\uD83D\uDD04";case"price_alert":return"\uD83D\uDCB0";case"new_listing":return"\uD83D\uDCE6";case"system":return"ℹ️";default:return"\uD83D\uDD14"}};return(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("button",{onClick:()=>r(!t),className:"relative p-2 text-[var(--text-secondary)] hover:text-white transition-colors",children:[a.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),n>0&&a.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-[var(--accent-red)] text-white text-xs font-bold rounded-full flex items-center justify-center",children:n>9?"9+":n}),a.jsx("span",{className:`absolute bottom-0 right-0 w-2 h-2 rounded-full ${o?"bg-[var(--accent-green)]":"bg-[var(--accent-red)]"}`})]}),t&&(0,a.jsxs)(a.Fragment,{children:[a.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>r(!1)}),(0,a.jsxs)("div",{className:"absolute right-0 top-full mt-2 w-80 bg-[var(--bg-secondary)] border border-[var(--border-default)] rounded-lg shadow-xl z-50 overflow-hidden",children:[(0,a.jsxs)("div",{className:"p-3 border-b border-[var(--border-default)] flex justify-between items-center",children:[a.jsx("h3",{className:"font-semibold text-white",children:"Notifications"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[n>0&&a.jsx("button",{onClick:c,className:"text-xs text-[var(--accent-blue)] hover:underline",children:"Mark all read"}),a.jsx("button",{onClick:d,className:"text-xs text-[var(--text-muted)] hover:text-[var(--accent-red)]",children:"Clear"})]})]}),a.jsx("div",{className:"max-h-80 overflow-y-auto",children:0===s.length?a.jsx("div",{className:"p-6 text-center text-[var(--text-muted)]",children:"No notifications yet"}):s.map(e=>a.jsx("div",{onClick:()=>i(e.id),className:`p-3 border-b border-[var(--border-default)] cursor-pointer hover:bg-[var(--bg-tertiary)] transition-colors ${e.read?"":"bg-[var(--bg-tertiary)]/50"}`,children:(0,a.jsxs)("div",{className:"flex gap-3",children:[a.jsx("span",{className:"text-xl",children:u(e.type)}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm text-white font-medium truncate",children:e.title||e.type}),a.jsx("p",{className:"text-xs text-[var(--text-muted)] mt-0.5 truncate",children:e.message||JSON.stringify(e)}),a.jsx("p",{className:"text-xs text-[var(--text-muted)] mt-1",children:new Date(e.timestamp||e.id).toLocaleTimeString()})]}),!e.read&&a.jsx("span",{className:"w-2 h-2 bg-[var(--accent-blue)] rounded-full shrink-0"})]})},e.id))}),a.jsx("div",{className:"p-2 border-t border-[var(--border-default)] text-center",children:a.jsx("span",{className:`text-xs ${o?"text-[var(--accent-green)]":"text-[var(--accent-red)]"}`,children:o?"● Connected":"○ Disconnected"})})]})]})]})}function h(){let{user:e,loginWithSteam:t,logout:r}=(0,o.a)(),{balance:s}=function(){let[e,t]=(0,l.useState)({balance:0,currency:"USD",loading:!0,error:null}),r=async()=>{try{t(e=>({...e,loading:!0}));let e=await i.x.getWalletBalance();e.success?t({balance:e.balance,currency:e.currency,loading:!1,error:null}):t(e=>({...e,balance:0,loading:!1}))}catch(e){t(e=>({...e,loading:!1,balance:0}))}},a=async e=>{try{return await i.x.debugDeposit(e),await r(),!0}catch(e){return console.error("Deposit failed",e),!1}};return(0,l.useEffect)(()=>{r()},[]),{...e,refreshBalance:r,debugDeposit:a}}(),[d,h]=(0,l.useState)(!1),p=async()=>{h(!1)};return(0,a.jsxs)("div",{className:"min-h-screen bg-[var(--bg-primary)]",children:[a.jsx("header",{className:"fixed top-0 left-0 right-0 z-50 bg-background/80 backdrop-blur-md border-b border-border",children:a.jsx("div",{className:"container mx-auto px-6 py-4",children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)(n(),{href:"/",className:"flex items-center gap-3 group",children:[a.jsx("div",{className:"w-10 h-10 bg-primary/20 rounded-lg flex items-center justify-center group-hover:bg-primary/30 transition-colors",children:a.jsx("span",{className:"text-primary font-bold text-xl",children:"S"})}),a.jsx("span",{className:"text-xl font-bold text-foreground",children:"SteamMarket"})]}),(0,a.jsxs)("nav",{className:"hidden md:flex items-center gap-8",children:[a.jsx(n(),{href:"/marketplace",className:"text-muted-foreground hover:text-foreground transition-colors font-medium",children:"Marketplace"}),a.jsx(n(),{href:"/sell",className:"text-muted-foreground hover:text-foreground transition-colors font-medium",children:"Sell Items"}),a.jsx(n(),{href:"/my-trades",className:"text-muted-foreground hover:text-foreground transition-colors font-medium",children:"My Trades"})]}),e?(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[a.jsx(x,{steamId:e.steamId}),a.jsx(m,{onClick:()=>h(!0)}),(0,a.jsxs)("div",{className:"bg-green-500/10 text-green-500 px-4 py-2 rounded-md font-mono font-bold border border-green-500/20",children:["$",s.toFixed(2)]}),(0,a.jsxs)(n(),{href:"/profile",className:"flex items-center gap-3 hover:bg-accent px-3 py-2 rounded-md transition-colors",children:[a.jsx("img",{src:e.avatar,alt:e.username,className:"h-8 w-8 rounded-full ring-2 ring-border"}),a.jsx("span",{className:"text-sm font-medium hidden sm:block",children:e.username})]}),a.jsx(c.zx,{variant:"ghost",size:"icon",onClick:r,className:"text-muted-foreground hover:text-foreground",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})})})]}):(0,a.jsxs)(c.zx,{onClick:t,children:[a.jsx("svg",{className:"w-5 h-5 mr-2",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2z"})}),"Login with Steam"]})]})})}),a.jsx(u,{isOpen:d,onClose:()=>h(!1),onCheckout:p}),(0,a.jsxs)("section",{className:"relative pt-32 pb-24 overflow-hidden",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-primary/5 via-transparent to-transparent pointer-events-none"}),a.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[800px] h-[800px] bg-primary/5 rounded-full blur-3xl pointer-events-none"}),(0,a.jsxs)("div",{className:"container mx-auto px-6 relative text-center",children:[(0,a.jsxs)("h1",{className:"text-5xl md:text-7xl font-extrabold tracking-tight mb-6",children:["Trade CS2 Skins with",a.jsx("span",{className:"text-primary block mt-2",children:"Confidence"})]}),a.jsx("p",{className:"text-xl text-muted-foreground mb-10 max-w-2xl mx-auto leading-relaxed",children:"The most trusted marketplace for CS2 items. Buy, sell, and trade with real-time prices, instant cashout, and secure escrow protection."}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[a.jsx(n(),{href:"/marketplace",children:a.jsx(c.zx,{size:"lg",className:"h-12 px-8 text-lg shadow-lg shadow-primary/20",children:"Browse Marketplace"})}),a.jsx(n(),{href:"/sell",children:a.jsx(c.zx,{size:"lg",variant:"secondary",className:"h-12 px-8 text-lg",children:"Start Selling"})})]}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6 mt-24",children:[{label:"Total Volume",value:"$2.5M+"},{label:"Active Listings",value:"15,000+"},{label:"Happy Users",value:"50,000+"},{label:"Avg. Response",value:"< 30s"}].map((e,t)=>(0,a.jsxs)("div",{className:"p-6 rounded-xl bg-card border border-border shadow-sm",children:[a.jsx("div",{className:"text-3xl font-bold text-foreground mb-2",children:e.value}),a.jsx("div",{className:"text-muted-foreground font-medium",children:e.label})]},t))})]})]}),a.jsx("section",{className:"py-24 border-t border-border bg-muted/50",children:(0,a.jsxs)("div",{className:"container mx-auto px-6",children:[a.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-center mb-16",children:"Why Choose Us?"}),a.jsx("div",{className:"grid md:grid-cols-3 gap-8",children:[{icon:"\uD83D\uDD12",title:"Secure Escrow",description:"Your items and money are protected until the trade is complete. No scams, no worries."},{icon:"⚡",title:"Instant Cashout",description:"Sell your skins instantly at competitive prices. Get paid to your balance immediately."},{icon:"\uD83D\uDCCA",title:"Real-Time Prices",description:"Prices updated from Steam Market, Buff163, and other sources for accurate valuations."},{icon:"\uD83C\uDFAF",title:"Smart Valuation",description:"We factor in stickers, float values, and patterns for the best possible prices."},{icon:"\uD83E\uDD16",title:"Automated Trading",description:"Our bots handle trades 24/7. Fast, reliable, and always online."},{icon:"\uD83D\uDC8E",title:"Low Fees",description:"Just 5% fee on sales. Keep more of what you earn."}].map((e,t)=>(0,a.jsxs)("div",{className:"p-8 rounded-xl bg-background border border-border hover:border-primary/50 transition-colors shadow-sm",children:[a.jsx("div",{className:"text-4xl mb-6 bg-primary/10 w-16 h-16 rounded-lg flex items-center justify-center",children:e.icon}),a.jsx("h3",{className:"text-xl font-bold mb-3",children:e.title}),a.jsx("p",{className:"text-muted-foreground leading-relaxed",children:e.description})]},t))})]})}),a.jsx("section",{className:"py-24 bg-primary/5 border-t border-border",children:(0,a.jsxs)("div",{className:"container mx-auto px-6 text-center",children:[a.jsx("h2",{className:"text-3xl md:text-4xl font-bold mb-6",children:"Ready to Start Trading?"}),a.jsx("p",{className:"text-muted-foreground mb-10 max-w-xl mx-auto text-lg",children:"Join thousands of traders and start buying or selling CS2 skins today."}),e?a.jsx(n(),{href:"/marketplace",children:a.jsx(c.zx,{size:"lg",className:"h-12 px-8 text-lg",children:"Go to Marketplace"})}):a.jsx(c.zx,{onClick:t,size:"lg",className:"h-12 px-8 text-lg",children:"Login with Steam to Get Started"})]})}),a.jsx("footer",{className:"py-12 border-t border-border bg-background",children:a.jsx("div",{className:"container mx-auto px-6",children:(0,a.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-center gap-6",children:[a.jsx("div",{className:"text-muted-foreground",children:"\xa9 2025 SteamMarket. Not affiliated with Valve Corporation."}),(0,a.jsxs)("div",{className:"flex gap-8",children:[a.jsx(n(),{href:"#",className:"text-muted-foreground hover:text-foreground transition-colors font-medium",children:"Terms"}),a.jsx(n(),{href:"#",className:"text-muted-foreground hover:text-foreground transition-colors font-medium",children:"Privacy"}),a.jsx(n(),{href:"#",className:"text-muted-foreground hover:text-foreground transition-colors font-medium",children:"Support"})]})]})})})]})}},943:(e,t,r)=>{"use strict";r.d(t,{a:()=>l});var a=r(4218),s=r(1018);let n=process.env.NEXT_PUBLIC_BACKEND_URL||"http://localhost:3001";function l(){let[e,t]=(0,a.useState)(null),[r,l]=(0,a.useState)(!1),[o,i]=(0,a.useState)(!0),c=(0,s.useRouter)(),d=(0,a.useCallback)(async()=>{try{let e=await fetch(`${n}/auth/check`,{credentials:"include"});if(e.ok){let r=await e.json();if(r.authenticated&&r.user){let e={id:r.user.steamId,steamId:r.user.steamId,username:r.user.username||`User ${r.user.steamId.substring(0,8)}`,avatar:r.user.avatar||"",balance:0,role:"user"};return t(e),l(!0),localStorage.setItem("user",JSON.stringify(e)),!0}}}catch(e){console.error("Auth check failed",e)}return t(null),l(!1),!1},[]);(0,a.useEffect)(()=>{let e=new AbortController,r=async()=>{i(!0);let r=new URLSearchParams(window.location.search),a=r.get("auth");"success"===a&&window.history.replaceState({},"",window.location.pathname);try{let r=await fetch(`${n}/auth/check`,{credentials:"include",signal:e.signal});if(r.ok){let e=await r.json();if(e.authenticated&&e.user){let r={id:e.user.steamId,steamId:e.user.steamId,username:e.user.username||`User ${e.user.steamId.substring(0,8)}`,avatar:e.user.avatar||"",balance:0,role:"user"};t(r),l(!0),localStorage.setItem("user",JSON.stringify(r))}else t(null),l(!1)}else t(null),l(!1)}catch(e){if(e instanceof Error&&"AbortError"===e.name)return;console.error("Auth check failed",e),t(null),l(!1)}i(!1)};return r(),()=>e.abort()},[]);let u=(0,a.useCallback)(()=>{window.location.href=`${n}/auth/steam`},[]),m=(0,a.useCallback)(async()=>{try{await fetch(`${n}/auth/logout`,{credentials:"include"})}catch(e){console.error(e)}localStorage.removeItem("user"),t(null),l(!1),c.refresh()},[c]);return{user:e,isAuthenticated:r,isLoading:o,loginWithSteam:u,logout:m,checkAuth:d,hasRole:()=>!1,canAccessAdmin:()=>!1,isLoggingOut:!1,isUpdatingTradeUrl:!1}}},8203:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>l,__esModule:()=>n,default:()=>i});var a=r(5153);let s=(0,a.createProxy)(String.raw`/home/zhaslan/Downloads/Telegram Desktop/Steammarketplace2-main (2)/Steammarketplace2-main/apps/frontend/src/app/page.tsx`),{__esModule:n,$$typeof:l}=s,o=s.default,i=o}};var t=require("../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[581,646,64,919,158],()=>r(7921));module.exports=a})();